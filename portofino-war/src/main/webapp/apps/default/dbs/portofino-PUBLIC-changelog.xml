<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
    <changeSet author="manydesigns" id="1313767352015-3">
        <createTable tableName="GROUPS">
            <column name="GROUPID" type="VARCHAR(25)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="GROUP_PKEY"/>
            </column>
            <column name="CREATORID" type="VARCHAR(25)"/>
            <column name="NAME" type="VARCHAR(50)"/>
            <column name="DESCRIPTION" type="VARCHAR(255)"/>
            <column name="DELETIONDATE" type="TIMESTAMP NULL"/>
            <column name="CREATIONDATE" type="TIMESTAMP NULL"/>
        </createTable>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-4">
        <createTable tableName="MSG">
            <column name="ID" type="VARCHAR(25)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="MSG_PKEY"/>
            </column>
            <column name="SUBJECT" type="VARCHAR(255)"/>
            <column name="BODY" type="VARCHAR(4000)"/>
            <column name="TO_" type="VARCHAR(25)"/>
            <column name="FROM_" type="VARCHAR(25)"/>
            <column name="CREATIONDATE" type="TIMESTAMP NULL"/>
            <column name="STATE" type="DECIMAL(10,0)"/>
        </createTable>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-5">
        <createTable tableName="MSGSTATE">
            <column name="ID" type="DECIMAL(10,0)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="MSGSTATE_PKEY"/>
            </column>
            <column name="NAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-6">
        <createTable tableName="OLDPWD">
            <column name="ID" type="VARCHAR(25)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="OLDPWD_PKEY"/>
            </column>
            <column name="CREATEDATE" type="TIMESTAMP NULL"/>
            <column name="PASSWORD" type="VARCHAR(30)"/>
            <column name="USERID" type="VARCHAR(25)"/>
        </createTable>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-7">
        <createTable tableName="USERS">
            <column name="USERID" type="VARCHAR(25)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="USER_PKEY"/>
            </column>
            <column name="DELETIONDATE" type="TIMESTAMP NULL"/>
            <column name="CREATIONDATE" type="TIMESTAMP NULL"/>
            <column name="MODIFIEDDATE" type="TIMESTAMP NULL"/>
            <column name="DEFAULTUSER" type="CHAR(1)"/>
            <column name="EXTAUTH" type="CHAR(1)"/>
            <column name="PWD" type="VARCHAR(50)"/>
            <column name="LASTPWDMODDATE" type="TIMESTAMP NULL"/>
            <column name="USERNAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="EMAILADDRESS" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="FIRSTNAME" type="VARCHAR(50)"/>
            <column name="MIDDLENAME" type="VARCHAR(50)"/>
            <column name="LASTNAME" type="VARCHAR(50)"/>
            <column name="JOBTITLE" type="VARCHAR(50)"/>
            <column name="LASTLOGINDATE" type="TIMESTAMP NULL"/>
            <column name="LASTFAILEDLOGINDATE" type="TIMESTAMP NULL"/>
            <column name="FAILEDLOGINATTEMPTS" type="DECIMAL(10,0)"/>
            <column name="AGREEDTOTERMS" type="CHAR(1)"/>
            <column name="STATE" type="DECIMAL(10,0)">
                <constraints nullable="false"/>
            </column>
            <column name="BOUNCED" type="DECIMAL(10,0)"/>
            <column name="TOKEN" type="VARCHAR(100)"/>
            <column name="REMQUESTION" type="VARCHAR(255)"/>
            <column name="REMANS" type="VARCHAR(255)"/>
            <column name="GRACELOGINCOUNT" type="DECIMAL(10,0)"/>
        </createTable>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-8">
        <createTable tableName="USERS_GROUPS">
            <column name="GROUPID" type="VARCHAR(25)">
                <constraints nullable="false"/>
            </column>
            <column name="USERID" type="VARCHAR(25)">
                <constraints nullable="false"/>
            </column>
            <column name="DELETIONDATE" type="TIMESTAMP NULL"/>
            <column name="CREATIONDATE" type="TIMESTAMP NULL">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-9">
        <createTable tableName="USERSTATE">
            <column name="ID" type="DECIMAL(10,0)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="USERSTATE_PKEY"/>
            </column>
            <column name="NAME" type="VARCHAR(75)">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-10">
        <addPrimaryKey columnNames="GROUPID, USERID, CREATIONDATE" constraintName="USERS_GROUPS_PKEY" tableName="USERS_GROUPS"/>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-11">
        <addUniqueConstraint columnNames="NAME" constraintName="GROUPS_NAME_KEY" disabled="false" tableName="GROUPS"/>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-12">
        <addUniqueConstraint columnNames="USERNAME" constraintName="USERS_USERNAME_KEY" disabled="false" tableName="USERS"/>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-14">
        <addForeignKeyConstraint baseColumnNames="CREATORID" baseTableName="GROUPS" constraintName="FK_GROUP_1" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="USERID" referencedTableName="USERS" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-15">
        <addForeignKeyConstraint baseColumnNames="FROM_" baseTableName="MSG" constraintName="FK_MSG_2" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="USERID" referencedTableName="USERS" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-16">
        <addForeignKeyConstraint baseColumnNames="STATE" baseTableName="MSG" constraintName="FK_MSG_1" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ID" referencedTableName="MSGSTATE" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-17">
        <addForeignKeyConstraint baseColumnNames="TO_" baseTableName="MSG" constraintName="FK_MSG_3" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="USERID" referencedTableName="USERS" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-18">
        <addForeignKeyConstraint baseColumnNames="USERID" baseTableName="OLDPWD" constraintName="FK_OLDPWD_1" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="USERID" referencedTableName="USERS" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-19">
        <addForeignKeyConstraint baseColumnNames="STATE" baseTableName="USERS" constraintName="FK_USER_1" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ID" referencedTableName="USERSTATE" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-20">
        <addForeignKeyConstraint baseColumnNames="GROUPID" baseTableName="USERS_GROUPS" constraintName="FK_USERSGROUPS_2" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="GROUPID" referencedTableName="GROUPS" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="manydesigns" id="1313767352015-21">
        <addForeignKeyConstraint baseColumnNames="USERID" baseTableName="USERS_GROUPS" constraintName="FK_USERSGROUPS_1" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="USERID" referencedTableName="USERS" referencesUniqueColumn="false"/>
    </changeSet>

    <changeSet author="portofino" id="insert-userstates">
        <insert tableName="USERSTATE">
            <column name="ID" valueNumeric="1" />
            <column name="NAME" value="active" />
            <column name="DESCRIPTION" />
        </insert>
        <insert tableName="USERSTATE">
            <column name="ID" valueNumeric="2" />
            <column name="NAME" value="suspended" />
            <column name="DESCRIPTION" />
        </insert>
        <insert tableName="USERSTATE">
            <column name="ID" valueNumeric="3" />
            <column name="NAME" value="banned" />
            <column name="DESCRIPTION" />
        </insert>
        <insert tableName="USERSTATE">
            <column name="ID" valueNumeric="4" />
            <column name="NAME" value="selfregistred" />
            <column name="DESCRIPTION" />
        </insert>
    </changeSet>

    <changeSet author="portofino" id="insert-msgstates">
        <insert tableName="MSGSTATE">
            <column name="ID" valueNumeric="1" />
            <column name="NAME" value="sent" />
            <column name="DESCRIPTION" />
        </insert>
        <insert tableName="MSGSTATE">
            <column name="ID" valueNumeric="2" />
            <column name="NAME" value="read" />
            <column name="DESCRIPTION" />
        </insert>
    </changeSet>

    <changeSet author="portofino" id="insert-users">
        <insert tableName="USERS">
            <column name="USERID" value="1" />
            <column name="CREATIONDATE" valueDate="CURRENT_TIMESTAMP" />
            <column name="CREATIONDATE" valueDate="CURRENT_TIMESTAMP" />
            <column name="PWD" value="admin" />
            <column name="USERNAME" value="admin" />
            <column name="EMAILADDRESS" value="admin@example.com" />
            <column name="FIRSTNAME" value="Ad" />
            <column name="LASTNAME" value="Min" />
            <column name="STATE" valueNumeric="1" />
        </insert>
        <insert tableName="USERS">
            <column name="USERID" value="2" />
            <column name="CREATIONDATE" valueDate="CURRENT_TIMESTAMP" />
            <column name="PWD" value="user" />
            <column name="USERNAME" value="user" />
            <column name="EMAILADDRESS" value="user@example.com" />
            <column name="FIRSTNAME" value="User" />
            <column name="LASTNAME" value="User" />
            <column name="STATE" valueNumeric="1" />
        </insert>
    </changeSet>

    <changeSet author="portofino" id="insert-groups">
        <insert tableName="GROUPS">
            <column name="GROUPID" value="anonymous" />
            <column name="CREATORID" value="1" />
            <column name="NAME" value="anonymous" />
            <column name="DESCRIPTION" value="anonymous users" />
            <column name="CREATIONDATE" valueDate="CURRENT_TIMESTAMP" />
        </insert>
        <insert tableName="GROUPS">
            <column name="GROUPID" value="registered" />
            <column name="CREATORID" value="1" />
            <column name="NAME" value="registered" />
            <column name="DESCRIPTION" value="registered users" />
            <column name="CREATIONDATE" valueDate="CURRENT_TIMESTAMP" />
        </insert>
        <insert tableName="GROUPS">
            <column name="GROUPID" value="administrators" />
            <column name="CREATORID" value="1" />
            <column name="NAME" value="administrators" />
            <column name="DESCRIPTION" value="administrators" />
            <column name="CREATIONDATE" valueDate="CURRENT_TIMESTAMP" />
        </insert>
    </changeSet>

    <changeSet author="portofino" id="insert-users_groups">
        <insert tableName="USERS_GROUPS">
            <column name="GROUPID" value="administrators"/>
            <column name="USERID" value="1"/>
            <column name="DELETIONDATE" />
            <column name="CREATIONDATE" valueDate="CURRENT_TIMESTAMP" />
        </insert>
    </changeSet>


    <changeSet author="portofino" id="insert-group-all">
        <insert tableName="GROUPS">
            <column name="GROUPID" value="all" />
            <column name="CREATORID" value="1" />
            <column name="NAME" value="All" />
            <column name="DESCRIPTION" value="All users" />
            <column name="CREATIONDATE" valueDate="CURRENT_TIMESTAMP" />
        </insert>
    </changeSet>
</databaseChangeLog>
